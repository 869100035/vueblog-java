{"remainingRequest":"/Users/zhangliang/vueWorkspace/vueblog/vueblog-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangliang/vueWorkspace/vueblog/vueblog-vue/src/views/BlogEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangliang/vueWorkspace/vueblog/vueblog-vue/src/views/BlogEdit.vue","mtime":1640757654943},{"path":"/Users/zhangliang/vueWorkspace/vueblog/vueblog-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhangliang/vueWorkspace/vueblog/vueblog-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangliang/vueWorkspace/vueblog/vueblog-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAiLi4vY29tcG9uZW50cy9IZWFkZXIiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkJsb2dFZGl0LnZ1ZSIsCiAgY29tcG9uZW50czoge0hlYWRlcn0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBjb25Nb25leTogJycsCiAgICAgICAgcmVtYXJrOicnLAogICAgICAgIGNvblR5cGU6JycsCiAgICAgICAgY29uVGltZTonJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHRpdGxlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5qCH6aKYJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICB7IG1pbjogMywgbWF4OiAyNSwgbWVzc2FnZTogJ+mVv+W6puWcqCAzIOWIsCAyNSDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgcmVtYXJrOlsKICAgICAgICAgIHsgdHJlcXVpcmVkOnRydWUsbWVzc2FnZTon6K+36L6T5YWl5aSH5rOoJyx0cmlnZ2VyOidibHVyJ30KICAgICAgICBdCiAgICAgIH0sCiAgICAgIGRhdGFMaXN0OiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CgogICAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCcvcmVjb3JkL2VkaXQnLCB0aGlzLnJ1bGVGb3JtLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgX3RoaXMuJGFsZXJ0KCfmk43kvZzmiJDlip8nLCAn5o+Q56S6JywgewogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgICBjYWxsYmFjazogYWN0aW9uID0+IHsKICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiL2Jsb2dzIikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIH0pCgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGFycm93RG93bigpIHsKICAgICAgdGhpcy5pc1Nob3dTZWxlY3QgPSAhdGhpcy5pc1Nob3dTZWxlY3Q7CiAgICB9LAogICAgc2VsZWN0KGl0ZW0sIGluZGV4KSB7CiAgICAgIHRoaXMuaXNTaG93U2VsZWN0ID0gZmFsc2U7CiAgICAgIHRoaXMudW5pdE1vZGVsID0gaW5kZXg7CiAgICAgIHRoaXMudW5pdE5hbWUgPSBpdGVtLnZhbHVlOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBheGlvcy5nZXQoJy9jb25UeXBlTGlzdCcsewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgIkF1dGhvcml6YXRpb24iOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICB9CiAgICB9KS50aGVuKChyZXMpPT57CiAgICAgIHZhciB0eXBlTWFwID0gcmVzLmRhdGEuZGF0YTsKICAgICAgZm9yICh2YXIgdHlwZUNkIGluIHR5cGVNYXApewogICAgICBfdGhpcy5kYXRhTGlzdC5wdXNoKHt0eXBlQ2Q6IHR5cGVDZCwgdHlwZU5hbWU6IHR5cGVNYXBbdHlwZUNkXX0pCiAgICAgfQogICAgfSkKCiAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5yZWNvcmRJZAogICAgY29uc29sZS5sb2cocmVjb3JkSWQpCiAgICBjb25zdCBfdGhpcyA9IHRoaXMKICAgIGlmKHJlY29yZElkKSB7CiAgICAgIHRoaXMuJGF4aW9zLmdldCgnL3JlY29yZC8nICsgcmVjb3JkSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zdCByZWNvcmQgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgX3RoaXMucnVsZUZvcm0gPSByZWNvcmQKICAgICAgICBfdGhpcy5ydWxlRm9ybS5jb25Nb25leSA9IHJlY29yZC5jb25Nb25leQogICAgICB9KQogICAgfQoKICB9Cgp9Cgo="},{"version":3,"sources":["BlogEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"BlogEdit.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Header></Header>\n\n    <div class=\"m-content\">\n\n      <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n        <el-form-item label=\"类别\" prop=\"conType\">\n          <el-select v-model=\"ruleForm.conType\" class=\"el-select\">\n            <el-option value=\"\">请选择</el-option>\n            <el-option v-for=\"item in dataList\" :value=\"item.typeCd\" :label=\"item.typeName\" :key=\"item.typeCd\"></el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"标题\" prop=\"title\" >\n          <el-input v-model=\"ruleForm.title\" class=\"el-input\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"金额\" prop=\"conMoney\" >\n          <el-input-number v-model=\"ruleForm.conMoney\" :precision=\"2\" :step=\"1\" :min=\"0.01\" :max=\"1000000\" controls-position=\"right\" class=\"el-input\"></el-input-number>\n        </el-form-item>\n\n        <el-form-item label=\"时间\" prop=\"conTime\" >\n          <el-date-picker  v-model=\"ruleForm.conTime\" class=\"el-input\"\n          type=\"date\" value-format=\"yyyy-MM-dd\" aria-placeholder=\"选择日期\"></el-date-picker>\n        </el-form-item>\n\n        <el-form-item label=\"备注\" prop=\"remark\" >\n          <el-input type=\"textarea\" v-model=\"ruleForm.remark\" class=\"el-input\"></el-input>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">确定</el-button>\n          <el-button @click=\"resetForm('ruleForm')\">清空</el-button>\n        </el-form-item>\n\n      </el-form>\n\n    </div>\n\n\n  </div>\n</template>\n\n<script>\n  import Header from \"../components/Header\";\n  import axios from \"axios\";\n  export default {\n    name: \"BlogEdit.vue\",\n    components: {Header},\n    data() {\n      return {\n        ruleForm: {\n          id: '',\n          title: '',\n          conMoney: '',\n          remark:'',\n          conType:'',\n          conTime:''\n        },\n        rules: {\n          title: [\n            { required: true, message: '请输入标题', trigger: 'blur' },\n            { min: 3, max: 25, message: '长度在 3 到 25 个字符', trigger: 'blur' }\n          ],\n          remark:[\n            { trequired:true,message:'请输入备注',trigger:'blur'}\n          ]\n        },\n        dataList: []\n      };\n    },\n    methods: {\n      submitForm(formName) {\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n\n            const _this = this\n            this.$axios.post('/record/edit', this.ruleForm, {\n              headers: {\n                \"Authorization\": localStorage.getItem(\"token\")\n              }\n            }).then(res => {\n              _this.$alert('操作成功', '提示', {\n                confirmButtonText: '确定',\n                callback: action => {\n                  _this.$router.push(\"/blogs\")\n                }\n              });\n\n            })\n\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      resetForm(formName) {\n        this.$refs[formName].resetFields();\n      },\n      arrowDown() {\n        this.isShowSelect = !this.isShowSelect;\n      },\n      select(item, index) {\n        this.isShowSelect = false;\n        this.unitModel = index;\n        this.unitName = item.value;\n      },\n    },\n    created() {\n      axios.get('/conTypeList',{\n        headers: {\n          \"Authorization\": localStorage.getItem(\"token\")\n        }\n      }).then((res)=>{\n        var typeMap = res.data.data;\n        for (var typeCd in typeMap){\n        _this.dataList.push({typeCd: typeCd, typeName: typeMap[typeCd]})\n       }\n      })\n\n      const recordId = this.$route.params.recordId\n      console.log(recordId)\n      const _this = this\n      if(recordId) {\n        this.$axios.get('/record/' + recordId).then(res => {\n          const record = res.data.data\n          _this.ruleForm = record\n          _this.ruleForm.conMoney = record.conMoney\n        })\n      }\n\n    }\n\n  }\n\n</script>\n\n<style scoped>\n  .m-content {\n    text-align: center;\n  }\n .el-select {\n   width: 240px;\n   margin-right: 50px;\n }\n  .el-input {\n    width: 240px;\n    margin-right: 50px;\n  }\n</style>\n"]}]}